<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>‚úä HS2 ‚Äì Wo f√§ngt Rassismus an?</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,600;9..40,700;9..40,800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        :root{
            --ac:#D4A24E;--ac-l:#E8C477;--ac-d:#B8872E;--ac-p:#FFF8EB;
            --terra:#C4553A;--sage:#6B8F71;--sage-l:#8FB996;
            --sand:#F5EDE3;--cream:#FFFDF8;
            --text:#2C2416;--tm:#5C4F3D;--tl:#8A7E6B;
            --w:#FFFFFF;--g:#4CAF50;--gp:#E8F5E9;
            --r:#E53935;--rp:#FFEBEE;
            --sh:0 4px 16px rgba(44,36,22,.07);
            --rd:18px;--rds:12px;
        }
        html{font-size:17px;scroll-behavior:smooth}
        body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--text);min-height:100vh;padding-bottom:88px}

        .top{position:sticky;top:0;z-index:100;padding:.5rem .75rem;background:linear-gradient(135deg,var(--ac-d),var(--ac),var(--ac-l));box-shadow:0 2px 10px rgba(212,162,78,.2)}
        .top-in{display:flex;align-items:center;justify-content:space-between;max-width:600px;margin:0 auto}
        .top a{color:var(--w);text-decoration:none;font-weight:700;font-size:.85rem;padding:.4rem .8rem;background:rgba(255,255,255,.18);border-radius:50px;display:flex;align-items:center;gap:.3rem}
        .top-t{display:flex;align-items:center;gap:.35rem;color:var(--w)}
        .top-t h1{font-size:.95rem;font-weight:700}
        .top-tag{font-size:.65rem;font-weight:700;background:rgba(255,255,255,.2);color:var(--w);padding:.15rem .5rem;border-radius:50px}

        .prog{background:var(--w);padding:.5rem 1rem;border-bottom:1px solid var(--sand)}
        .prog-in{max-width:600px;margin:0 auto;display:flex;align-items:center;gap:.75rem}
        .prog-dots{display:flex;gap:.4rem;flex:1;justify-content:center}
        .dot{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:700;background:var(--sand);color:var(--tl);transition:all .35s cubic-bezier(.34,1.56,.64,1);cursor:pointer;border:2px solid transparent}
        .dot.active{background:var(--ac);color:var(--w);transform:scale(1.15);border-color:var(--ac-l)}
        .dot.done{background:var(--g);color:var(--w)}.dot.done::after{content:'‚úì'}
        .dot.lock{opacity:.35;pointer-events:none}
        .prog-bar{width:60px;height:6px;background:var(--sand);border-radius:3px;overflow:hidden}
        .prog-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--ac),var(--terra));border-radius:3px;transition:width .5s ease}

        .ct{max-width:600px;margin:0 auto;padding:1rem}
        .st{display:none}.st.on{display:block;animation:stIn .45s ease}
        @keyframes stIn{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}

        .sth{text-align:center;margin-bottom:1rem;padding:1.1rem;background:var(--w);border-radius:var(--rd);box-shadow:var(--sh);position:relative;overflow:hidden}
        .sth::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--ac),var(--terra),var(--sage))}
        .sth .em{font-size:2.4rem;margin-bottom:.3rem;display:block;animation:bounce 2s ease-in-out infinite}
        @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
        .sth h2{font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:800;margin-bottom:.3rem}
        .sth p{font-size:.95rem;color:var(--tm);line-height:1.4;font-weight:600}

        /* ‚îÄ‚îÄ Task box ‚îÄ‚îÄ */
        .task{background:var(--ac-p);border-radius:var(--rds);padding:.8rem 1rem;margin-bottom:.7rem;
            border-left:4px solid var(--ac)}
        .task p{font-size:1rem;font-weight:700;color:var(--text);line-height:1.4}

        /* Scale items */
        .si{background:var(--w);border-radius:var(--rd);padding:1rem;margin-bottom:.7rem;box-shadow:var(--sh);border:2px solid var(--sand);transition:border-color .3s ease}
        .si.ans{border-color:var(--ac)}
        .si-q{padding:.65rem .75rem;background:var(--ac-p);border-radius:var(--rds);font-size:.95rem;font-weight:600;text-align:center;line-height:1.4;margin-bottom:.75rem;border-left:3px solid var(--ac);color:var(--text)}
        .si-labels{display:flex;justify-content:space-between;font-size:.75rem;font-weight:700;color:var(--tl);margin-bottom:.25rem}
        .si-slider{width:100%;-webkit-appearance:none;appearance:none;height:10px;border-radius:5px;background:linear-gradient(90deg,var(--gp),#FFF9C4,var(--rp));outline:none;margin-bottom:.2rem}
        .si-slider::-webkit-slider-thumb{-webkit-appearance:none;width:30px;height:30px;border-radius:50%;background:var(--ac);cursor:pointer;border:3px solid var(--w);box-shadow:0 2px 8px rgba(0,0,0,.15)}
        .si-val{text-align:center;font-size:.85rem;font-weight:700;color:var(--ac-d);min-height:1.2rem;margin-bottom:.4rem}
        .si-btn{display:block;width:100%;padding:.65rem;background:var(--ac);color:var(--w);border:none;border-radius:var(--rds);font-size:.9rem;font-weight:700;cursor:pointer;font-family:inherit;transition:all .2s ease}
        .si-btn:hover{background:var(--ac-d)}
        .si-btn:disabled{background:#CBD5E0;cursor:not-allowed}
        .si-fb{margin-top:.5rem;padding:.6rem;border-radius:var(--rds);font-size:.88rem;line-height:1.4;display:none;font-weight:600}
        .si-fb.on{display:block;animation:fbIn .3s ease}
        @keyframes fbIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
        .si-fb.ok{background:var(--gp);color:#2E7D32}
        .si-fb.warn{background:var(--ac-p);color:var(--ac-d)}
        .si-fb.bad{background:var(--rp);color:var(--r)}

        /* Perspective cards */
        .pc{background:var(--w);border-radius:var(--rd);overflow:hidden;margin-bottom:.8rem;box-shadow:var(--sh)}
        .pc-scene{padding:.9rem;background:var(--sand);font-size:.9rem;line-height:1.5;border-bottom:2px solid var(--ac-p)}
        .pc-tabs{display:flex;border-bottom:1px solid var(--sand)}
        .pc-tab{flex:1;padding:.6rem;text-align:center;font-size:.8rem;font-weight:700;cursor:pointer;background:var(--w);border:none;font-family:inherit;color:var(--tl);transition:all .2s ease;border-bottom:3px solid transparent}
        .pc-tab.on{color:var(--ac-d);border-bottom-color:var(--ac);background:var(--ac-p)}
        .pc-con{padding:.9rem;display:none;font-size:.9rem;line-height:1.55;color:var(--tm)}
        .pc-con.on{display:block;animation:fbIn .25s ease}
        .pc-con .sp{font-weight:700;color:var(--text);display:block;margin-bottom:.3rem}
        .rq{margin-top:.6rem;padding:.6rem;background:var(--ac-p);border-radius:var(--rds);font-size:.85rem;color:var(--ac-d);font-weight:700}

        .chs{display:flex;flex-direction:column;gap:.4rem;margin-top:.5rem}
        .ch{padding:.7rem .9rem;border-radius:var(--rds);border:2px solid var(--sand);background:var(--w);font-size:.88rem;font-weight:600;color:var(--text);cursor:pointer;text-align:left;font-family:inherit;transition:all .2s ease;line-height:1.3}
        .ch:active{transform:scale(.98)}
        .ch.cg{border-color:var(--g);background:var(--gp);color:#2E7D32}
        .ch.cb{border-color:var(--r);background:var(--rp);color:var(--r)}
        .ch:disabled{cursor:default}
        .rfb{margin-top:.4rem;padding:.55rem;border-radius:var(--rds);font-size:.85rem;line-height:1.4;display:none;font-weight:600}
        .rfb.on{display:block;animation:fbIn .3s ease}
        .rfb.g{background:var(--gp);color:#2E7D32}
        .rfb.r{background:var(--rp);color:var(--r)}

        /* Reform cards */
        .rc{background:var(--w);border-radius:var(--rd);padding:1rem;margin-bottom:.7rem;box-shadow:var(--sh)}
        .rc-bad{padding:.6rem .75rem;background:var(--rp);border-radius:var(--rds);font-size:.95rem;font-weight:700;color:var(--r);text-align:center;margin-bottom:.7rem;border-left:3px solid var(--r)}
        .rc-lbl{font-size:.8rem;font-weight:700;color:var(--sage);margin-bottom:.4rem}
        .rf-btn{padding:.65rem .9rem;border-radius:var(--rds);border:2px solid var(--sand);background:var(--w);font-size:.88rem;font-weight:600;color:var(--text);cursor:pointer;text-align:left;font-family:inherit;transition:all .2s ease;margin-bottom:.35rem;display:block;width:100%;line-height:1.3}
        .rf-btn:active{transform:scale(.98)}
        .rf-btn.rfg{border-color:var(--g);background:var(--gp);color:#2E7D32}
        .rf-btn.rfb{border-color:var(--r);background:var(--rp);color:var(--r)}
        .rf-btn:disabled{cursor:default}
        .rf-fb{margin-top:.25rem;padding:.55rem;border-radius:var(--rds);font-size:.85rem;line-height:1.4;display:none;font-weight:600}
        .rf-fb.on{display:block;animation:fbIn .3s ease}
        .rf-fb.g{background:var(--gp);color:#2E7D32}
        .rf-fb.r{background:var(--rp);color:var(--r)}

        .fb{padding:.75rem;border-radius:var(--rds);margin-top:.5rem;display:none;font-size:.9rem;line-height:1.4;font-weight:600}
        .fb.on{display:block;animation:fbIn .3s ease}
        .fb.fg{background:var(--gp);color:#2E7D32}
        .fb.fn{background:var(--sand);color:var(--tm)}

        .done-btn{display:flex;align-items:center;justify-content:center;gap:.4rem;width:100%;padding:1rem;margin-top:1rem;background:linear-gradient(135deg,var(--g),var(--sage-l));color:var(--w);border:none;border-radius:var(--rds);font-size:1rem;font-weight:700;cursor:pointer;font-family:inherit;transition:all .3s ease}
        .done-btn:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(76,175,80,.25)}
        .done-btn:disabled{background:#CBD5E0;cursor:not-allowed;transform:none;box-shadow:none}

        .fnav{position:fixed;bottom:1rem;left:50%;transform:translateX(-50%);display:flex;gap:.5rem;align-items:center;background:var(--w);padding:.5rem .75rem;border-radius:50px;box-shadow:0 4px 20px rgba(44,36,22,.13);z-index:200}
        .fnav button{height:44px;padding:0 1.1rem;border-radius:50px;border:none;background:var(--sand);font-size:.9rem;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:.3rem;transition:all .25s ease;font-family:inherit;color:var(--text)}
        .fnav button:hover:not(:disabled){background:var(--ac);color:var(--w)}
        .fnav button:disabled{opacity:.3;cursor:not-allowed}
        .fnav .nl{font-size:.85rem;font-weight:700;color:var(--text);padding:0 .5rem}

        .comp{display:none;text-align:center;padding:2rem 1.25rem;background:var(--w);border-radius:var(--rd);box-shadow:var(--sh)}
        .comp.on{display:block;animation:stIn .5s ease}
        .comp .be{font-size:3.5rem;margin-bottom:.6rem;animation:bounce 2s ease-in-out infinite}
        .comp h2{font-family:'Playfair Display',serif;font-size:1.4rem;color:var(--g);margin-bottom:.5rem}
        .comp p{font-size:.95rem;color:var(--tm);line-height:1.5;margin-bottom:1.2rem}
        .comp a{display:inline-flex;align-items:center;gap:.3rem;padding:.75rem 1.5rem;background:var(--ac);color:var(--w);border-radius:50px;text-decoration:none;font-weight:700;font-size:.9rem}
    </style>
</head>
<body>

<header class="top"><div class="top-in">
    <a href="index.html">‚Üê Zur√ºck</a>
    <div class="top-t"><span>‚úä</span><h1>Wo f√§ngt Rassismus an?</h1></div>
    <span class="top-tag">Kl. 7</span>
</div></header>

<div class="prog"><div class="prog-in">
    <div class="prog-dots">
        <div class="dot active" data-s="1" onclick="go(1)">1</div>
        <div class="dot lock" data-s="2" onclick="go(2)">2</div>
        <div class="dot lock" data-s="3" onclick="go(3)">3</div>
    </div>
    <div class="prog-bar"><div class="prog-fill" id="pf"></div></div>
</div></div>

<main class="ct">

<section class="st on" id="s1">
    <div class="sth">
        <span class="em">üîç</span>
        <h2>S√§tze bewerten</h2>
        <p>Lies den Satz. Schiebe den Regler. Klicke dann auf ‚ÄûBest√§tigen".</p>
    </div>
    <div class="task"><p>üéØ Wie schlimm ist der Satz? Schiebe den Regler!</p></div>
    <div id="scaleWrap"></div>
    <div class="fb" id="f1"></div>
    <button class="done-btn" id="b1" disabled onclick="complete(1)">Weiter ‚úì</button>
</section>

<section class="st" id="s2">
    <div class="sth">
        <span class="em">üîÑ</span>
        <h2>Zwei Seiten</h2>
        <p>Klicke auf ‚ÄûWas er denkt" und ‚ÄûWie sie f√ºhlt". Beantworte dann die Frage.</p>
    </div>
    <div class="task"><p>üéØ Lies beide Seiten. Klicke auf die richtige Antwort.</p></div>
    <div id="perspWrap"></div>
    <div class="fb" id="f2"></div>
    <button class="done-btn" id="b2" disabled onclick="complete(2)">Weiter ‚úì</button>
</section>

<section class="st" id="s3">
    <div class="sth">
        <span class="em">üí¨</span>
        <h2>Besser sagen</h2>
        <p>Welcher Satz ist besser? Klicke darauf.</p>
    </div>
    <div class="task"><p>üéØ Der rote Satz ist schlecht. Klicke auf den besseren Satz.</p></div>
    <div id="refWrap"></div>
    <div class="fb" id="f3"></div>
    <button class="done-btn" id="b3" disabled onclick="complete(3)">üéâ Fertig!</button>
</section>

<div class="comp" id="comp">
    <div class="be">üéâ</div>
    <h2>Stark gemacht!</h2>
    <p>Ihr k√∂nnt verletzende S√§tze erkennen und es besser sagen!</p>
    <a href="index.html">‚Üê Zur√ºck zur √úbersicht</a>
</div>
</main>

<nav class="fnav">
    <button onclick="goPrev()" id="bp" disabled>‚óÄ Zur√ºck</button>
    <div class="nl"><span id="cl">1</span> / 3</div>
    <button onclick="goNext()" id="bn" disabled>Weiter ‚ñ∂</button>
</nav>

<script>
let cur=1,T=3,dn=[];

const SD=[
{t:'"Wo kommst du WIRKLICH her?"',c:2,fb:{0:'‚ùå Nicht harmlos! Dieser Satz sagt: Du geh√∂rst nicht hierher.',1:'üëÜ Nicht ganz ‚Äì er sagt: Du bist fremd hier.',2:'‚úÖ Richtig! Er behandelt jemanden als fremd.'}},
{t:'"F√ºr einen Ausl√§nder sprichst du echt gut Deutsch."',c:2,fb:{0:'‚ùå Klingt nett, ist aber verletzend. Dahinter steckt ein Vorurteil.',1:'üëÜ N√§her dran ‚Äì aber dahinter steckt ein Vorurteil.',2:'‚úÖ Richtig! Das Kompliment zeigt ein Vorurteil.'}},
{t:'"Ich hab nichts gegen Ausl√§nder, ABER..."',c:2,fb:{0:'‚ùå Das "Aber" ist ein Warnsignal. Was danach kommt, ist oft verletzend.',1:'üëÜ Gut gesehen ‚Äì das "Aber" zeigt das Problem.',2:'‚úÖ Richtig! Das "Aber" verr√§t den eigentlichen Gedanken.'}},
{t:'"Darf ich deine Haare anfassen?"',c:1,fb:{0:'‚ùå Das passiert oft. Es ist √ºbergriffig ‚Äì niemands K√∂rper ist zum Anfassen.',1:'‚úÖ Richtig! Kein Mensch ist zum Anschauen oder Anfassen.',2:'üëÜ √úbergriffig ‚Äì aber nicht immer absichtlich.'}},
{t:'"K√∂nnen alle Sch√ºler bitte in den Sitzkreis kommen?"',c:0,fb:{0:'‚úÖ Richtig! Dieser Satz ist v√∂llig okay.',1:'‚ùå Dieser Satz ist harmlos!',2:'‚ùå Stopp ‚Äì der ist okay! Alle werden gleich behandelt.'}}
];

const PD=[
{scene:'Mensa. Markus sagt lachend: <strong>‚ÄûHey, das ist unser Tisch! Eure Seite ist da dr√ºben!"</strong>',
sp:{n:'Markus denkt:',t:'"War doch nur Spa√ü! Die soll sich nicht so anstellen."'},
af:{n:'Lena f√ºhlt:',t:'"Ich wollte dazugeh√∂ren. Jetzt f√ºhle ich mich nicht willkommen."'},
q:'Warum ist es f√ºr Lena verletzender, als Markus denkt?',
ch:[{t:'Weil Lena keinen Spa√ü versteht',c:0},{t:'Markus\' "Spa√ü" gibt Lena das Gef√ºhl, nicht dazuzugeh√∂ren',c:1},{t:'Weil Lena zu empfindlich ist',c:0}],
gf:'‚úÖ Die Wirkung z√§hlt mehr als die Absicht.',bf:'‚ùå Wie Lena sich f√ºhlt, ist das Entscheidende.'},
{scene:'Sport. Samir wird als Letzter gew√§hlt. Tim: <strong>‚ÄûNa gut, dann nehmen wir halt Samir."</strong>',
sp:{n:'Tim denkt:',t:'"Irgendjemand muss ja zuletzt gew√§hlt werden."'},
af:{n:'Samir f√ºhlt:',t:'"Ich bin immer der Letzte. Als w√§re ich der Trostpreis."'},
q:'Was ist das Problem?',
ch:[{t:'Nichts ‚Äì jemand muss halt zuletzt kommen',c:0},{t:'Tim gibt Samir das Gef√ºhl, nicht gewollt zu sein',c:1},{t:'Samir sollte besser Sport machen',c:0}],
gf:'‚úÖ Kleine Momente summieren sich.',bf:'‚ùå Stell dir vor, du w√§rst IMMER der Letzte.'},
{scene:'Aylin erz√§hlt vom Urlaub. Jens: <strong>‚ÄûAber du bist doch Deutsche? Warum f√§hrst du in die T√ºrkei?"</strong>',
sp:{n:'Jens denkt:',t:'"Ich war einfach neugierig."'},
af:{n:'Aylin f√ºhlt:',t:'"F√ºr manche bin ich nie \'deutsch genug\'."'},
q:'Was zeigt Jens\' Frage?',
ch:[{t:'Interesse an anderen Kulturen',c:0},{t:'Er sieht "deutsch" und "t√ºrkisch" als Widerspruch',c:1},{t:'Gar nichts ‚Äì ganz normal',c:0}],
gf:'‚úÖ Man kann beides sein ‚Äì ohne sich zu erkl√§ren.',bf:'‚ùå Die Frage zeigt: Jens sieht beides als Gegensatz.'}
];

const RD=[
{bad:'"Wo kommst du wirklich her?"',opts:[{t:'"Erz√§hl mal ‚Äì was machst du gerne?"',c:1},{t:'"Du siehst aus wie ein Ausl√§nder."',c:0},{t:'"In welchem Land wurdest du geboren?"',c:0}],gf:'‚úÖ So zeigst du echtes Interesse an der Person!',bf:'‚ùå Zeig Interesse an der Person, nicht am Aussehen.'},
{bad:'"F√ºr einen Ausl√§nder sprichst du gut Deutsch."',opts:[{t:'"Du dr√ºckst dich echt gut aus!"',c:1},{t:'"Hast du Deutsch in einem Kurs gelernt?"',c:0},{t:'"Besser als manche Deutsche, haha!"',c:0}],gf:'‚úÖ Ein ehrliches Kompliment ohne Vorurteil!',bf:'‚ùå Hier schwingt noch ein Vorurteil mit.'},
{bad:'"Die kochen bestimmt komisches Essen."',opts:[{t:'"Die essen bestimmt kein Schweinefleisch."',c:0},{t:'"Vielleicht k√∂nnen wir was Neues probieren!"',c:1},{t:'"Hauptsache die essen nicht bei uns."',c:0}],gf:'‚úÖ Neugier statt Vorurteil ‚Äì so geht es!',bf:'‚ùå Immer noch Vorurteile. Sei offen.'},
{bad:'"Ihr Ausl√§nder seid doch alle gleich."',opts:[{t:'"Alle aus dem Land sind so."',c:0},{t:'"Ich kenne dich noch nicht ‚Äì erz√§hl mehr!"',c:1},{t:'"Naja, stimmt halt meistens."',c:0}],gf:'‚úÖ Jeder Mensch ist einzigartig!',bf:'‚ùå Das ist eine Verallgemeinerung. Lerne die Person kennen.'}
];

/* Render Station 1 */
function r1(){const w=document.getElementById('scaleWrap');SD.forEach((d,i)=>{
w.innerHTML+=`<div class="si" id="si${i}"><div class="si-q">${d.t}</div><div class="si-labels"><span>üòä Harmlos</span><span>üòü Verletzend</span><span>‚ùå Rassistisch</span></div><input type="range" class="si-slider" id="sl${i}" min="0" max="2" step="1" value="1"><div class="si-val" id="sv${i}">Verletzend</div><button class="si-btn" id="sb${i}" onclick="cScale(${i})">Best√§tigen</button><div class="si-fb" id="sf${i}"></div></div>`;
});document.querySelectorAll('.si-slider').forEach((s,i)=>{s.addEventListener('input',()=>{document.getElementById('sv'+i).textContent=['üòä Harmlos','üòü Verletzend','‚ùå Rassistisch'][s.value]})});}
let s1d=0;
function cScale(i){const v=+document.getElementById('sl'+i).value,d=SD[i],diff=Math.abs(v-d.c),fb=document.getElementById('sf'+i);
fb.className='si-fb on '+(diff===0?'ok':diff===1?'warn':'bad');fb.textContent=d.fb[v];
document.getElementById('sb'+i).disabled=true;document.getElementById('si'+i).classList.add('ans');document.getElementById('sl'+i).disabled=true;
s1d++;if(s1d>=SD.length){show('f1','fg','üëè Alle S√§tze bewertet! Auch "nett gemeinte" S√§tze k√∂nnen verletzen.');document.getElementById('b1').disabled=false}}

/* Render Station 2 */
function r2(){const w=document.getElementById('perspWrap');PD.forEach((d,i)=>{
w.innerHTML+=`<div class="pc" id="pc${i}"><div class="pc-scene">${d.scene}</div><div class="pc-tabs"><button class="pc-tab on" onclick="stab(${i},'sp',this)">üó£Ô∏è Was er denkt</button><button class="pc-tab" onclick="stab(${i},'af',this)">üíî Wie sie f√ºhlt</button></div><div class="pc-con on" id="pc${i}sp"><span class="sp">${d.sp.n}</span>${d.sp.t}</div><div class="pc-con" id="pc${i}af"><span class="sp">${d.af.n}</span>${d.af.t}</div><div style="padding:0 .9rem .9rem"><div class="rq">‚ùì ${d.q}</div><div class="chs" id="rc${i}">${d.ch.map(c=>`<button class="ch" data-c="${c.c}" onclick="cRef(${i},this)">${c.t}</button>`).join('')}</div><div class="rfb" id="rf${i}"></div></div></div>`;});}
let s2d=0;
function stab(i,w,btn){const c=document.getElementById('pc'+i);c.querySelectorAll('.pc-tab').forEach(t=>t.classList.remove('on'));c.querySelectorAll('.pc-con').forEach(t=>t.classList.remove('on'));document.getElementById('pc'+i+w).classList.add('on');btn.classList.add('on');}
function cRef(i,btn){const ct=document.getElementById('rc'+i),fb=document.getElementById('rf'+i),ok=btn.dataset.c==='1';
ct.querySelectorAll('.ch').forEach(b=>{b.disabled=true;if(b.dataset.c==='1')b.classList.add('cg');else if(b===btn&&!ok)b.classList.add('cb')});
fb.className='rfb on '+(ok?'g':'r');fb.textContent=ok?PD[i].gf:PD[i].bf;
s2d++;if(s2d>=PD.length){show('f2','fg','üëè Die Wirkung z√§hlt mehr als die Absicht!');document.getElementById('b2').disabled=false}}

/* Render Station 3 */
function r3(){const w=document.getElementById('refWrap');RD.forEach((d,i)=>{
w.innerHTML+=`<div class="rc" id="rc2${i}"><div class="rc-bad">‚ùå ${d.bad}</div><div class="rc-lbl">Welcher Satz ist besser?</div>${d.opts.map((o,j)=>`<button class="rf-btn" data-c="${o.c}" onclick="cRf(${i},this)">${o.t}</button>`).join('')}<div class="rf-fb" id="rff${i}"></div></div>`;});}
let s3d=0;
function cRf(i,btn){const cd=document.getElementById('rc2'+i),fb=document.getElementById('rff'+i),ok=btn.dataset.c==='1';
cd.querySelectorAll('.rf-btn').forEach(b=>{b.disabled=true;if(b.dataset.c==='1')b.classList.add('rfg');else if(b===btn&&!ok)b.classList.add('rfb')});
fb.className='rf-fb on '+(ok?'g':'r');fb.textContent=ok?RD[i].gf:RD[i].bf;
s3d++;if(s3d>=RD.length){show('f3','fg','üéØ Bessere Worte ‚Äì ein wichtiger erster Schritt!');document.getElementById('b3').disabled=false}}

function show(id,cls,txt){const e=document.getElementById(id);e.className='fb on '+cls;e.textContent=txt}
function complete(n){if(!dn.includes(n))dn.push(n);if(n<T){cur=n+1;ui();scr()}else{ui();document.getElementById('comp').classList.add('on');scr()}}
function go(n){if(n>1&&!dn.includes(n-1))return;cur=n;ui();scr()}
function goPrev(){if(cur>1){cur--;ui();scr()}}
function goNext(){if(cur<T&&dn.includes(cur)){cur++;ui();scr()}}
function scr(){window.scrollTo({top:0,behavior:'smooth'})}
function ui(){
document.querySelectorAll('.st').forEach(s=>s.classList.remove('on'));
const el=document.getElementById('s'+cur);if(el)el.classList.add('on');
document.querySelectorAll('.dot').forEach(d=>{const s=+d.dataset.s;d.className='dot';d.textContent=s;if(dn.includes(s)){d.classList.add('done');d.textContent=''}else if(s===cur)d.classList.add('active');else if(s>1&&!dn.includes(s-1))d.classList.add('lock')});
document.getElementById('pf').style.width=Math.round(dn.length/T*100)+'%';
document.getElementById('cl').textContent=cur;document.getElementById('bp').disabled=cur<=1;document.getElementById('bn').disabled=cur>=T||!dn.includes(cur);
if(dn.length===T){document.querySelectorAll('.st').forEach(s=>s.classList.remove('on'));document.getElementById('comp').classList.add('on')}}
r1();r2();r3();
</script>

</body>
</html>
